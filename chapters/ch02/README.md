## Chapter 02: 도구와 함수 호출

### 이번 챕터에서 배운 것
1. 메모리가 없다면 AI는 전에 했던 대화를 기억하지 못함.
 -> 그래서 메모리를 배열로 선언, 유저가 보낸 메시지를 저장
 -> 프레임워크는 메모리를 다루는 게 구현되어있음.
2. AI 호출할 때 메모리를 같이 넘겨줘서 기억 가능
3. Tool를 함께 보내면 모델이 함수 사용법을 이해할 수 있음

### 로직
1. 유저가 보낸 메시지 메모리에 추가, 메모리는 배열
2. call_ai() 호출
3. call_ai()는 메모리와 툴 구조를 함께 전달해 AI 호출
4. process_ai_response() 호출
5. tool_call이 있다면 AI가 코드 실행 요청한 걸 메시지 메모리에 추가
6. 함수 이름과 인자 추출하고 파이썬 딕셔너리로 변환
7. FUNCTION_MAP에서 추출한 함수 이름과 일치한 것을 찾음
8. 찾은 함수 실행시키고 메모리에 콜id, 함수, 호출 결과 저장
9. 다시 call_ai() 호출
10. tool_call이 없으면 응답 출력

### 챕터 핵심 구성 요소
- `get_weather`: 모델이 호출할 수 있는 예시 도구 함수
- `FUNCTION_MAP`: 도구 이름과 파이썬 함수를 연결하는 매핑
- `process_ai_response`: 도구 호출을 감지하고 실행하는 함수
- `call_ai`: 메시지와 도구 정의를 모델에 보내는 함수
- `TOOLS`: 시스템에서 함수들이 어떤 구조인지 설명서
